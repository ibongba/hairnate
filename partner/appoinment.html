<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<meta name="Description" content="Enter your description here" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" />
		<link rel="stylesheet" href="../css/style.css" />
		<link href="../css/main.css" rel="stylesheet" />
		<title>Appoinment</title>
	</head>

	<body>
		<div id="nav"></div>

		<div class="container">
			<h2 class="text-center my-5">
				APPOINMENTS
				<div class="dropdown float-right">
					<button
						class="btn btn-secondary dropdown-toggle"
						type="button"
						id="dropdownMenuButton"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="false"
						style="background-color: #eeebe6; color: #c1b09d; border-color: #eeebe6"
					>
						FILTER
					</button>
					<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
						<a class="dropdown-item" href="#">ช่าง COACH</a>
						<a class="dropdown-item" href="#">ช่างคิว</a>
						<a class="dropdown-item" href="#">ช่างโฟม</a>
					</div>
				</div>
			</h2>
			<div class="row">
				<div class="col-md-3">
					<h3>TODAY : 27 March</h3>
					<button type="button" class="btn btn-light form-control my-5 text-left">APPOINTMENT : 3 คน</button>
					<button type="button" class="btn btn-light form-control text-left">SUCCESS : 0 คน</button>
				</div>

				<div class="col-md-9">
					<div id="calendar"></div>
					<table id="table" class="table table-striped d-none">
						<thead>
							<tr>
								<th class="app-text">NO.</th>
								<th class="app-text">SERVICE TIME</th>
								<th class="app-text">CUSTOMER NAME</th>
								<th class="app-text">SERVICE TYPE</th>
								<th class="app-text">BARBER</th>
								<th class="app-text">ADDRESS</th>
								<th class="app-text">TEL.</th>
								<th class="app-text">STATUS</th>
								<th class="app-text">ALERT</th>
							</tr>
						</thead>
						<tbody id="detail">
							<tr class="app-text">
								<th scope="row">1</th>
								<td>10.45 AM</td>
								<td>Justin Bieber</td>
								<td>Under Cut</td>
								<td>COACH</td>
								<td>120/121 condo A Pakket Nonthaburi 11120</td>
								<td>0812345678</td>
								<td><button type="button" class="btn btn-success" style="min-width: auto">Finished</button></td>
								<td><button type="button" class="btn btn-danger" style="min-width: auto">Alert</button></td>
							</tr>
							<tr class="app-text">
								<th scope="row">2</th>
								<td>10.45 AM</td>
								<td>Justin Bieber</td>
								<td>Under Cut</td>
								<td>COACH</td>
								<td>120/121 condo A Pakket Nonthaburi 11120</td>
								<td>0812345678</td>
								<td><button type="button" class="btn btn-success" style="min-width: auto">Finished</button></td>
								<td><button type="button" class="btn btn-danger" style="min-width: auto">Alert</button></td>
							</tr>
							<tr class="app-text">
								<th scope="row">3</th>
								<td>10.45 AM</td>
								<td>Justin Bieber</td>
								<td>Under Cut</td>
								<td>COACH</td>
								<td>120/121 condo A Pakket Nonthaburi 11120</td>
								<td>0812345678</td>
								<td><button type="button" class="btn btn-success" style="min-width: auto">Finished</button></td>
								<td><button type="button" class="btn btn-danger" style="min-width: auto">Alert</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<hr class="col-12" style="background-color: #eeebe6" />
			<style>
				input:checked + .slider {
					background-color: #a33e3e;
				}
			</style>
			<div class="row my-2">
				<div class="col-md-3 text-right">
					<label class="switch">
						<input type="checkbox" checked />
						<span class="slider round"></span>
					</label>
				</div>
				<div class="col">
					<button type="button" class="btn btn-secondary" style="background-color: black">ช่วงเช้า</button>
					<button type="button" class="btn btn-secondary" style="background-color: black">09.00</button>
					<button type="button" class="btn btn-secondary" style="background-color: black">10.00</button>
					<button type="button" class="btn btn-secondary" style="background-color: black">11.00</button>
					<button type="button" class="btn btn-outline-secondary">เลื่อนเวลา</button>
				</div>
			</div>
			<div class="row mb-5">
				<div class="col-md-3 text-right">
					<label class="switch">
						<input type="checkbox" checked />
						<span class="slider round"></span>
					</label>
				</div>
				<div class="col">
					<button type="button" class="btn btn-secondary" style="background-color: #dbdbdb; border-color: #dbdbdb">ช่วงบ่าย</button>
					<button type="button" class="btn btn-secondary" style="background-color: #dbdbdb; border-color: #dbdbdb">13.00</button>
					<button type="button" class="btn btn-secondary" style="background-color: #dbdbdb; border-color: #dbdbdb">14.00</button>
					<button type="button" class="btn btn-secondary" style="background-color: #dbdbdb; border-color: #dbdbdb">15.00</button>
					<button type="button" class="btn btn-outline-secondary">เลื่อนเวลา</button>
				</div>
			</div>
		</div>
		<footer>
			<div class="container">
				<div class="foot_logo pt-5">
					<img class="logo-img center-block" src="../images/logo-app-white.png " />
				</div>

				<div class="footer_text">เว็บแอพพลิเคชั่นรวบรวมร้านตัดผมแฟชั่นชาย และตัดผลบริจาคแบบ Delivery ในเขตกรุงเทพมหานครและปริมณฑล</div>

				<div class="foot_icon">
					<a href="# "><i class="fab fa-facebook"></i></a>
					<a href="# "><i class="fab fa-twitter"></i></a>
					<a href="# "><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</footer>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js "></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js "></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js "></script>
		<script src="../js/main.js"></script>
		<script>
			$(function () {
				$('#nav').load('http://localhost/hairnate/layout/navbar.html');
			});
		</script>
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				var calendarEl = document.getElementById('calendar');

				var calendar = new FullCalendar.Calendar(calendarEl, {
					headerToolbar: {
						left: 'prev,next today',
						center: 'title',
						right: 'dayGridMonth',
					},
					initialDate: '2020-10-12',
					navLinks: true, // can click day/week names to navigate views
					selectable: true,
					selectMirror: true,
					select: function (arg) {
						// var title = prompt('Event Title:');
						// if (title) {
						// 	calendar.addEvent({
						// 		title: title,
						// 		start: arg.start,
						// 		end: arg.end,
						// 		allDay: arg.allDay,
						// 	});
						// }
						// calendar.unselect();

						$('#table').removeClass('d-none');
					},
					// unselect: function (arg) {
					// 	$('#table').addClass('d-none');
					// },
					eventClick: function (arg) {
						if (confirm('Are you sure you want to delete this event?')) {
							arg.event.remove();
						}
					},
					editable: true,
					dayMaxEvents: true, // allow "more" link when too many events
					// events: [{
					//     title: 'All Day Event',
					//     content: 'hvjvuyvvgiugiugiugiu',
					//     start: '2020-06-01'
					// }, {
					//     title: 'Long Event',
					//     start: '2020-06-07',
					//     end: '2020-06-10'
					// }, {
					//     groupId: 999,
					//     title: 'Repeating Event',
					//     start: '2020-06-09T16:00:00'
					// }, {
					//     groupId: 999,
					//     title: 'Repeating Event',
					//     start: '2020-06-16T16:00:00'
					// }, {
					//     title: 'Conference',
					//     start: '2020-06-11',
					//     end: '2020-06-13'
					// }, {
					//     title: 'Meeting',
					//     start: '2020-06-12T10:30:00',
					//     end: '2020-06-12T12:30:00'
					// }, {
					//     title: 'Lunch',
					//     start: '2020-06-12T12:00:00'
					// }, {
					//     title: 'Meeting',
					//     start: '2020-06-12T14:30:00'
					// }, {
					//     title: 'Happy Hour',
					//     start: '2020-06-12T17:30:00'
					// }, {
					//     title: 'Dinner',
					//     start: '2020-06-12T20:00:00'
					// }, {
					//     title: 'Birthday Party',
					//     start: '2020-06-13T07:00:00'
					// }, {
					//     title: 'Click for Google',
					//     url: 'http://google.com/',
					//     start: '2020-06-28'
					// }]
				});

				calendar.render();
			});

			function getUrlVars() {
				var vars = [],
					hash;
				var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
				for (var i = 0; i < hashes.length; i++) {
					hash = hashes[i].split('=');
					vars.push(hash[0]);
					vars[hash[0]] = hash[1];
				}
				return vars;
			}
			$().ready(() => {
				$.ajax({
					method: 'POST',
					url: '../service/core.php',
					data: {
						action: 'get_detail_order_by_customer',
						service_date: 'service_date',
						// id: getUrlVars()['id']
					},
					dataType: 'json',
					// contentType: false,
					// processData: false,
				}).done(function (msg) {
					msg = JSON.parse(msg);
					if (msg.code === 200) {
						msg.result.map((item) => {
							$('#detail').append(detail(item));
							return;
						});
					}
				});
			});

			detail = (item) => {
				var img = item.image ? item.image : 'https://via.placeholder.com/150';
				const date = new Date(item.service_date);
				const result = date.toLocaleDateString('th-TH', {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				});
				return `
			             <tr class="app-text">
			                             <th scope="row">1</th>
			                             <td>${item.service_time}</td>
			                             <td>${item.name}</td>
			                             <td>${item.name}</td>
			                             <td>COACH</td>
			                             <td>120/121 condo A Pakket Nonthaburi 11120</td>
			                             <td>0812345678</td>
			                             <td><button type="button" class="btn btn-success" style="min-width: auto;">Finished</button></td>
			                             <td><button type="button" class="btn btn-danger" style="min-width: auto;">Alert</button></td>
			                         </tr>
			             `;
			};
		</script>
	</body>
</html>
